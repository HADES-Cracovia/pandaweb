#!/bin/sh

export PATH=/home/rich/TRB/trbsoft/trbnettools/binlocal:${PATH}

# first disable test_trigger_ mode to allow reading
REG20=$(trb_i2c r 0x8900 0x08 0x20 | awk '{print $2}')
trb_i2c w 0x8900 0x08 0x20 0x00

# Channel Masks
trb_i2c w 0x8900 0x08 0x00 0xff
trb_i2c w 0x8900 0x08 0x01 0xff
trb_i2c w 0x8900 0x08 0x02 0xff
trb_i2c w 0x8900 0x08 0x03 0xff
trb_i2c w 0x8900 0x08 0x04 0xff
trb_i2c w 0x8900 0x08 0x05 0xff
trb_i2c w 0x8900 0x08 0x06 0xff
trb_i2c w 0x8900 0x08 0x07 0xff
trb_i2c w 0x8900 0x08 0x08 0xff
trb_i2c w 0x8900 0x08 0x09 0xff
trb_i2c w 0x8900 0x08 0x0a 0xff
trb_i2c w 0x8900 0x08 0x0b 0xff
trb_i2c w 0x8900 0x08 0x0c 0xff
trb_i2c w 0x8900 0x08 0x0d 0xff
trb_i2c w 0x8900 0x08 0x0e 0xff
trb_i2c w 0x8900 0x08 0x0f 0xff

# Restore Register 20
trb_i2c w 0x8900 0x08 0x20 $REG20
